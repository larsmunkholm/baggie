{"version":3,"file":"useQueryMapper-4UTK0obU.js","sources":["../../packages/react/src/hooks/useQueryMapper/useQueryMapper.mdx"],"sourcesContent":["import { Source } from \"@storybook/blocks\";\n\n# useQueryMapper\n\nA hook like `useState`, but stored in the URL query string.\n\nStoring the state in the URL query makes it possible to bookmark and share\nlinks while keeping the state.\n\n## Parameters\n\n> `T` is a generic type - it can be whatever you want\n\n| Parameter         | Type                                            | Required |\n| :---------------- | :---------------------------------------------- | :------: |\n| **valueToParams** | `(value: T) => [key: string, value: string][]`  |    ✔    |\n| **paramsToValue** | `(params: [key: string, value: string][]) => T` |    ✔    |\n| **options**       | `object`                                        |          |\n\n| Option           | Type                  | Default value |\n| :--------------- | :-------------------- | :------------ |\n| **defaultValue** | `T`                   |               |\n| **history**      | `\"push\" \\| \"replace\"` | `\"replace\"`   |\n\n## Example\n\n<Source dark code={`\nimport React, { useCallback } from \"react\";\nimport { QueryMapperParams, useQueryMapper } from \"@baggie/react\";\n\ntype Selections = {\n    size: \"small\" | \"medium\" | \"large\";\n    color: string;\n    amount: number;\n}\n\nfunction valueToParams(value: Selections): QueryMapperParams {\n    return Object.entries(value);\n}\n\nfunction paramsToValue(params: QueryMapperParams): Selections {\n    return {\n      size: params.find(([key, value]) => key === \"size\")?.[1] as Selections[\"size\"],\n      color: params.find(([key, value]) => key === \"color\")?.[1],\n      amount: parseInt(params.find(([key, value]) => key === \"amount\")?.[1]) || 0,\n    };\n}\n\nexport const App = () => {\n    const [selections, setSelections] = useQueryMapper(valueToParams, paramsToValue);\n\n    const amountMinusOne = useCallback(() => {\n        setSelections((prev) => {\n            const previousAmount = prev.amount || 0;\n            const newAmount = Math.max(0, previousAmount - 1);\n            return { ...prev, amount: newAmount };\n        });\n    }, [setSelections]);\n\n    const amountPlusOne = useCallback(() => {\n        setSelections((prev) => {\n          const previousAmount = prev.amount || 0;\n          const newAmount = previousAmount + 1;\n          return { ...prev, amount: newAmount };\n      });\n    }, [setSelections]);\n\n    return (\n        <article>\n            <h2>Product name</h2>\n            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>\n\n            <h3>Size</h3>\n            <button\n                style={{ fontWeight: selections.size === \"small\" ? \"bold\" : \"normal\" }}\n                onClick={() => setSelections((prev) => ({ ...prev, size: \"small\" }))}\n            >\n                Small\n            </button>\n            <button\n                style={{ fontWeight: selections.size === \"medium\" ? \"bold\" : \"normal\" }}\n                onClick={() => setSelections((prev) => ({ ...prev, size: \"medium\" }))}\n            >\n                Medium\n            </button>\n            <button\n                style={{ fontWeight: selections.size === \"large\" ? \"bold\" : \"normal\" }}\n                onClick={() => setSelections((prev) => ({ ...prev, size: \"large\" }))}\n            >\n                Large\n            </button>\n\n            <h3>Color</h3>\n            <button\n                style={{ fontWeight: selections.color === \"red\" ? \"bold\" : \"normal\" }}\n                onClick={() => setSelections((prev) => ({ ...prev, color: \"red\" }))}\n            >\n                Red\n            </button>\n            <button\n                style={{ fontWeight: selections.color === \"green\" ? \"bold\" : \"normal\" }}\n                onClick={() => setSelections((prev) => ({ ...prev, color: \"green\" }))}\n            >\n                Green\n            </button>\n\n            <h3>Amount</h3>\n            <button onClick={amountMinusOne}>\n                -\n            </button>\n            <input\n                value={selections.amount}\n                onChange={(event) => setSelections((prev) => ({ ...prev, amount: parseInt(event.target.value) }))}\n            />\n            <button onClick={amountPlusOne}>\n                +\n            </button>\n\n            <h3>Reset</h3>\n            <button onClick={() => setSelections({ size: null, color: null, amount: null })}>\n                Reset selections\n            </button>\n        </article>\n    );\n};\n\n`} />\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Source","MDXContent","MDXLayout"],"mappings":"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"}