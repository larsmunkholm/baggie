{"version":3,"file":"isCprValid-d3c70017.js","sources":["../../packages/core/src/string/validation/isCprValid/isCprValid.ts","../../packages/core/src/string/validation/isCprValid/Example.tsx","../../packages/core/src/string/validation/isCprValid/isCprValid.mdx"],"sourcesContent":["import { getCprRegex } from \"../../regex/getCprRegex/getCprRegex\";\nimport { convertToDate } from \"../../convert/convertToDate/convertToDate\";\n\n/**\n * Check if a CPR number is valid.\n */\nexport const isCprValid = (\n    cprNumber: string | number | HTMLInputElement,\n    gender?: \"f\" | \"female\" | \"m\" | \"male\",\n): boolean => {\n    const cpr =\n        typeof cprNumber === \"string\"\n            ? cprNumber\n            : typeof cprNumber === \"number\"\n            ? String(cprNumber)\n            : cprNumber.value;\n\n    // Check that the format is correct and that the date is valid\n    if (\n        !getCprRegex().test(cpr) ||\n        !convertToDate(cpr.slice(0, 4) + \"19\" + cpr.slice(4, 6))\n    ) {\n        return false;\n    }\n\n    // Should we check if the gender matches the CPR number?\n    const checkGender = typeof gender === \"string\";\n\n    // If not, return true\n    if (!checkGender) {\n        return true;\n    }\n\n    // Otherwise, check that the gender matches the CPR number\n    const genderLetter = (gender as string).charAt(0).toLowerCase();\n    const lastDigit = parseInt(cpr.slice(-1));\n    const lastDigitIsEven = lastDigit % 2;\n\n    return !!(\n        (genderLetter === \"f\" && !lastDigitIsEven) ||\n        (genderLetter === \"m\" && lastDigitIsEven)\n    );\n};\n","import React, { useMemo, useState } from \"react\";\nimport { Source } from \"@storybook/blocks\";\nimport { InputWrapper } from \"@baggie/react\";\nimport { isCprValid } from \"./isCprValid\";\n\ninterface Props {\n    cprNumber: string;\n}\n\nexport const Example = (props: Props) => {\n    const [cpr, setCpr] = useState(props.cprNumber);\n    const [gender, setGender] = useState(\"\");\n\n    const isValid = useMemo(() => isCprValid(cpr, (gender as \"f\") || undefined), [cpr, gender]);\n\n    return (\n        <>\n            <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}>\n                <InputWrapper label=\"CPR number\" labelForId=\"cpr-input\">\n                    <input\n                        id=\"cpr-input\"\n                        value={cpr}\n                        onChange={({ target }) => setCpr(target.value)}\n                        spellCheck={false}\n                    />\n                </InputWrapper>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"\"}\n                        onChange={() => setGender(() => \"\")}\n                    />{\" \"}\n                    Don&apos;t check gender\n                </label>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"f\"}\n                        onChange={() => setGender(() => \"f\")}\n                    />{\" \"}\n                    Female\n                </label>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"m\"}\n                        onChange={() => setGender(() => \"m\")}\n                    />{\" \"}\n                    Male\n                </label>\n            </div>\n\n            <Source\n                dark\n                code={`\nimport { convertEmailsToLinks } from \"@baggie/core\";\n\nconst cprNumber = \"${cpr}\";\n${gender ? `const gender = ${gender ? `\"${gender}\"` : \"\"};\\n` : \"\"}\nconst isValid = isCprValid(cprNumber${gender ? \", gender\" : \"\"});\n// isValid = ${isValid ? \"true\" : \"false\"}\n`}\n            />\n        </>\n    );\n};\n","import { Example } from \"./Example\";\n\n# isCprValid\n\nCheck if a CPR number is valid.\n\nWorks with the birthdate and the four control digits combined or separated\nby a dash or whitespace.\n\n> The CPR number is a **Danish civil registration ID**.\n\n> **This also checks if the date is valid,** using JavaScript's Date object.\n\n## Parameters\n\n| Parameter     | Type                                   | Required |\n| :------------ | :------------------------------------- | :------: |\n| **cprNumber** | `string \\| number \\| HTMLInputElement` |    âœ”     |\n| **gender**    | `\"f\" \\| \"female\" \\| \"m\" \\| \"male\"`     |          |\n\n## Example\n\n<Example cprNumber=\"170686-1034\" />\n"],"names":["isCprValid","cprNumber","gender","cpr","getCprRegex","convertToDate","genderLetter","lastDigitIsEven","Example","props","setCpr","useState","setGender","isValid","useMemo","jsxs","Fragment","jsx","InputWrapper","target","Source","_createMdxContent","_components","_provideComponents","_jsxs","_Fragment","_jsx","MDXContent","MDXLayout"],"mappings":"4eAMa,MAAAA,EAAa,CACtBC,EACAC,IACU,CACJ,MAAAC,EACF,OAAOF,GAAc,SACfA,EACA,OAAOA,GAAc,SACrB,OAAOA,CAAS,EAChBA,EAAU,MAGpB,GACI,CAACG,EAAY,EAAE,KAAKD,CAAG,GACvB,CAACE,EAAcF,EAAI,MAAM,EAAG,CAAC,EAAI,KAAOA,EAAI,MAAM,EAAG,CAAC,CAAC,EAEhD,MAAA,GAOX,GAAI,EAHgB,OAAOD,GAAW,UAI3B,MAAA,GAIX,MAAMI,EAAgBJ,EAAkB,OAAO,CAAC,EAAE,YAAY,EAExDK,EADY,SAASJ,EAAI,MAAM,EAAE,CAAC,EACJ,EAEpC,MAAO,CAAC,EACHG,IAAiB,KAAO,CAACC,GACzBD,IAAiB,KAAOC,EAEjC,ECjCOC,EAAAC,GAAA,CACH,KAAA,CAAAN,EAAAO,CAAA,EAAAC,EAAAA,SAAAF,EAAA,SAAA,EACA,CAAAP,EAAAU,CAAA,EAAAD,EAAA,SAAA,EAAA,EAEAE,EAAAC,EAAAA,QAAA,IAAAd,EAAAG,EAAAD,GAAA,MAAA,EAAA,CAAAC,EAAAD,CAAA,CAAA,EAEA,OAAAa,EAAA,KAAAC,WAAA,CAAA,SAAA,CAEQD,EAAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA,OAAA,cAAA,SAAA,IAAA,MAAA,EAAA,SAAA,CACIE,EAAA,IAAAC,EAAA,CAAA,MAAA,aAAA,WAAA,YAAA,SAAAD,EAAA,IACI,QAAC,CAAA,GAAA,YACM,MAAAd,EACI,SAAA,CAAA,CAAA,OAAAgB,CAAA,IAAAT,EAAAS,EAAA,KAAA,EACsC,WAAA,EACjC,CAAA,EAAA,EAEpBJ,OAAA,QAAA,CAAA,SAAA,CAGIE,EAAA,IAAA,QAAC,CAAA,KAAA,QACQ,KAAA,SACA,QAAAf,IAAA,GACe,SAAA,IAAAU,EAAA,IAAA,EAAA,CACc,CAAA,EACtC,IAAG,oBAAI,EAAA,EAEXG,OAAA,QAAA,CAAA,SAAA,CAGIE,EAAA,IAAA,QAAC,CAAA,KAAA,QACQ,KAAA,SACA,QAAAf,IAAA,IACe,SAAA,IAAAU,EAAA,IAAA,GAAA,CACe,CAAA,EACvC,IAAG,QAAI,EAAA,EAEXG,OAAA,QAAA,CAAA,SAAA,CAGIE,EAAA,IAAA,QAAC,CAAA,KAAA,QACQ,KAAA,SACA,QAAAf,IAAA,IACe,SAAA,IAAAU,EAAA,IAAA,GAAA,CACe,CAAA,EACvC,IAAG,MAAI,EAAA,CAEX,EAAA,EACJK,EAAA,IAEAG,EAAC,CAAA,KAAA,GACO,KAAA;AAAA;AAAA;AAAA,qBACEjB,CAAA;AAAA,EAGED,EAAA,kBAAAA,EAAA,IAAAA,CAAA,IAAA,EAAA;AAAA,EACgC,EAAA;AAAA,sCAAUA,EAAA,WAAA,EAAA;AAAA,eACJW,EAAA,OAAA,OAAA;AAAA,CACrB,CAAA,CAE7B,CAAA,CAAA,CAGZ,kMCnEA,SAASQ,EAAkBZ,EAAO,CAChC,MAAMa,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,WAAY,aACZ,OAAQ,SACR,GAAI,KACJ,MAAO,QACP,MAAO,QACP,GAAI,KACJ,GAAI,KACJ,MAAO,QACP,GAAI,KACJ,KAAM,MACP,EAAEC,EAAoB,EAAEd,EAAM,UAAU,EACzC,OAAOe,EAAAA,KAAMC,EAAAA,SAAW,CACtB,SAAU,CAACC,EAAAA,IAAKJ,EAAY,GAAI,CAC9B,GAAI,aACJ,SAAU,YACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,iCACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU;AAAA,yBACX,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,WAAY,CACtC,SAAU,CAAC;AAAA,EAAME,OAAMF,EAAY,EAAG,CACpC,SAAU,CAAC,uBAAwBI,MAAKJ,EAAY,OAAQ,CAC1D,SAAU,8BACX,CAAA,EAAG,GAAG,CACR,CAAA,EAAG;AAAA,CAAI,CACT,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,WAAY,CACtC,SAAU,CAAC;AAAA,EAAME,OAAMF,EAAY,EAAG,CACpC,SAAU,CAACI,EAAAA,IAAKJ,EAAY,OAAQ,CAClC,SAAU,wCACX,CAAA,EAAG,kCAAkC,CACvC,CAAA,EAAG;AAAA,CAAI,CACT,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,aACJ,SAAU,YACX,CAAA,EAAG;AAAA,EAAME,OAAMF,EAAY,MAAO,CACjC,SAAU,CAACI,EAAAA,IAAKJ,EAAY,MAAO,CACjC,SAAUE,EAAAA,KAAMF,EAAY,GAAI,CAC9B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,GAAI,CAC9B,MAAO,OACP,SAAU,WACtB,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,OACP,SAAU,MACtB,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,SACP,SAAU,UACtB,CAAW,CAAC,CACZ,CAAS,CACT,CAAO,EAAGE,EAAAA,KAAMF,EAAY,MAAO,CAC3B,SAAU,CAACE,EAAAA,KAAMF,EAAY,GAAI,CAC/B,SAAU,CAACI,EAAAA,IAAKJ,EAAY,GAAI,CAC9B,MAAO,OACP,SAAUI,EAAAA,IAAKJ,EAAY,OAAQ,CACjC,SAAU,WACxB,CAAa,CACb,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,OACP,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,SAAU,oCACxB,CAAa,CACb,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,SACP,SAAU,GACtB,CAAW,CAAC,CACZ,CAAS,EAAGE,EAAAA,KAAMF,EAAY,GAAI,CACxB,SAAU,CAACI,EAAAA,IAAKJ,EAAY,GAAI,CAC9B,MAAO,OACP,SAAUI,EAAAA,IAAKJ,EAAY,OAAQ,CACjC,SAAU,QACxB,CAAa,CACb,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,OACP,SAAUI,EAAAA,IAAKJ,EAAY,KAAM,CAC/B,SAAU,+BACxB,CAAa,CACb,CAAW,EAAGI,EAAAA,IAAKJ,EAAY,GAAI,CACvB,MAAO,QACnB,CAAW,CAAC,CACZ,CAAS,CAAC,CACV,CAAO,CAAC,CACH,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,UACJ,SAAU,SAChB,CAAK,EAAG;AAAA,EAAMI,EAAI,IAAClB,EAAS,CACtB,UAAW,aACjB,CAAK,CAAC,CACN,CAAG,CACH,CACA,SAASmB,EAAWlB,EAAQ,GAAI,CAC9B,KAAM,CAAC,QAASmB,CAAS,EAAI,OAAO,OAAO,CAAE,EAAEL,EAAoB,EAAEd,EAAM,UAAU,EACrF,OAAOmB,EAAYF,EAAAA,IAAKE,EAAW,OAAO,OAAO,CAAE,EAAEnB,EAAO,CAC1D,SAAUiB,EAAAA,IAAKL,EAAmBZ,CAAK,CAC3C,CAAG,CAAC,EAAIY,EAAkBZ,CAAK,CAC/B"}