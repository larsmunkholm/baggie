{"version":3,"file":"isCprValid-9879c63e.js","sources":["../../packages/core/src/string/validation/isCprValid/isCprValid.ts","../../packages/core/src/string/validation/isCprValid/Example.tsx","../../packages/core/src/string/validation/isCprValid/isCprValid.mdx"],"sourcesContent":["import { getCprRegex } from \"../../regex/getCprRegex/getCprRegex\";\nimport { convertToDate } from \"../../convert/convertToDate/convertToDate\";\n\n/**\n * Check if a CPR number is valid.\n */\nexport const isCprValid = (\n    cprNumber: string | number | HTMLInputElement,\n    gender?: \"f\" | \"female\" | \"m\" | \"male\",\n): boolean => {\n    const cpr =\n        typeof cprNumber === \"string\"\n            ? cprNumber\n            : typeof cprNumber === \"number\"\n            ? String(cprNumber)\n            : cprNumber.value;\n\n    // Check that the format is correct and that the date is valid\n    if (\n        !getCprRegex().test(cpr) ||\n        !convertToDate(cpr.slice(0, 4) + \"19\" + cpr.slice(4, 6))\n    ) {\n        return false;\n    }\n\n    // Should we check if the gender matches the CPR number?\n    const checkGender = typeof gender === \"string\";\n\n    // If not, return true\n    if (!checkGender) {\n        return true;\n    }\n\n    // Otherwise, check that the gender matches the CPR number\n    const genderLetter = (gender as string).charAt(0).toLowerCase();\n    const lastDigit = parseInt(cpr.slice(-1));\n    const lastDigitIsEven = lastDigit % 2;\n\n    return !!(\n        (genderLetter === \"f\" && !lastDigitIsEven) ||\n        (genderLetter === \"m\" && lastDigitIsEven)\n    );\n};\n","import React, { useMemo, useState } from \"react\";\nimport { Source } from \"@storybook/blocks\";\nimport { InputWrapper } from \"@baggie/react\";\nimport { isCprValid } from \"./isCprValid\";\n\ninterface Props {\n    cprNumber: string;\n}\n\nexport const Example = (props: Props) => {\n    const [cpr, setCpr] = useState(props.cprNumber);\n    const [gender, setGender] = useState(\"\");\n\n    const isValid = useMemo(() => isCprValid(cpr, (gender as \"f\") || undefined), [cpr, gender]);\n\n    return (\n        <>\n            <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}>\n                <InputWrapper label=\"CPR number\" labelForId=\"cpr-input\">\n                    <input\n                        id=\"cpr-input\"\n                        value={cpr}\n                        onChange={({ target }) => setCpr(target.value)}\n                        spellCheck={false}\n                    />\n                </InputWrapper>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"\"}\n                        onChange={() => setGender(() => \"\")}\n                    />{\" \"}\n                    Don&apos;t check gender\n                </label>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"f\"}\n                        onChange={() => setGender(() => \"f\")}\n                    />{\" \"}\n                    Female\n                </label>\n\n                <label>\n                    <input\n                        type=\"radio\"\n                        name=\"gender\"\n                        checked={gender === \"m\"}\n                        onChange={() => setGender(() => \"m\")}\n                    />{\" \"}\n                    Male\n                </label>\n            </div>\n\n            <Source\n                dark\n                code={`\nimport { convertEmailsToLinks } from \"@baggie/core\";\n\nconst cprNumber = \"${cpr}\";\n${gender ? `const gender = ${gender ? `\"${gender}\"` : \"\"};\\n` : \"\"}\nconst isValid = isCprValid(cprNumber${gender ? \", gender\" : \"\"});\n// isValid = ${isValid ? \"true\" : \"false\"}\n`}\n            />\n        </>\n    );\n};\n","import { Example } from \"./Example\";\n\n# isCprValid\n\nCheck if a CPR number is valid.\n\nWorks with the birthdate and the four control digits combined or separated\nby a dash or whitespace.\n\n> The CPR number is a **Danish civil registration ID**.\n\n> **This also checks if the date is valid,** using JavaScript's Date object.\n\n## Parameters\n\n| Parameter     | Type                                   | Required |\n| :------------ | :------------------------------------- | :------: |\n| **cprNumber** | `string \\| number \\| HTMLInputElement` |    âœ”     |\n| **gender**    | `\"f\" \\| \"female\" \\| \"m\" \\| \"male\"`     |          |\n\n## Example\n\n<Example cprNumber=\"170686-1034\" />\n"],"names":["isCprValid","cprNumber","gender","cpr","getCprRegex","convertToDate","genderLetter","lastDigitIsEven","Example","props","setCpr","useState","setGender","isValid","useMemo","jsxs","Fragment","jsx","InputWrapper","target","Source","MDXContent","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment"],"mappings":"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"}