{"version":3,"file":"useRefreshedToday-ed6c580d.js","sources":["../../packages/react/src/hooks/useRefreshedToday/useRefreshedToday.mdx"],"sourcesContent":["import { Source } from \"@storybook/blocks\";\n\n# useRefreshedToday\n\nA hook that helps you know if a component was refreshed today.\n\nThis is useful in apps showing data that needs to change depending on the day.\nLike the current opening hours of a restaurant.\n\n## Examples\n\nReact (web):\n\n<Source dark code={`\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useRefreshedToday } from \"@baggie/react\";\n\nexport const StoreItem = () => {\n    const [storeData, setStoreData] = useState();\n    const { wasRefreshedToday, resetRefreshDate, updateRefreshDate } =\n        useRefreshedToday();\n\n    const getStoreData = useCallback(() => {\n        updateRefreshDate();\n\n        fetch(...)\n            .then((newData) => {\n                setStoreData(newData);\n            })\n            .catch(() => {\n                resetRefreshDate();\n            })\n    }, []);\n\n    useEffect(() => {\n        getStoreData();\n\n        const onFocus = () => {\n            if (!wasRefreshedToday()) {\n                // Component has not been refreshed today - do it now\n                getStoreData();\n            }\n        };\n\n        window.addEventListener(\"focus\", onFocus);\n        return () => window.removeEventListener(\"focus\", onFocus);\n    }, [getStoreData, wasRefreshedToday]);\n\n    return (...);\n};\n\n`} />\n\n\nReact Native:\n\n<Source dark code={`\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { AppState } from \"react-native\";\nimport { useRefreshedToday } from \"@baggie/react\";\n\nexport const StoreItem = () => {\n    const [storeData, setStoreData] = useState();\n    const { wasRefreshedToday, resetRefreshDate, updateRefreshDate } =\n        useRefreshedToday();\n\n    const getStoreData = useCallback(() => {\n        updateRefreshDate();\n\n        fetch(...)\n            .then((newData) => {\n                setStoreData(newData);\n            })\n            .catch(() => {\n                resetRefreshDate();\n            })\n    }, []);\n\n    useEffect(() => {\n        getStoreData();\n\n        const onFocus = AppState.addEventListener(\"change\", (status) => {\n            if (status === \"active\" && !wasRefreshedToday()) {\n                // Component has not been refreshed today - do it now\n                getStoreData();\n            }\n        });\n        return () => onFocus.remove();\n    }, [getStoreData, wasRefreshedToday]);\n\n    return (...);\n};\n\n`} />\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Source","MDXContent","MDXLayout"],"mappings":"mVAIA,SAASA,EAAkBC,EAAO,CAChC,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,GAAI,IACL,EAAEC,EAAoB,EAAEF,EAAM,UAAU,EACzC,OAAOG,EAAAA,KAAMC,EAAAA,SAAW,CACtB,SAAU,CAACC,EAAAA,IAAKJ,EAAY,GAAI,CAC9B,GAAI,oBACJ,SAAU,mBACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,gEACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU;AAAA,gDACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,GAAI,CAC7B,GAAI,WACJ,SAAU,UACX,CAAA,EAAG;AAAA,EAAMI,MAAKJ,EAAY,EAAG,CAC5B,SAAU,cAChB,CAAK,EAAG;AAAA,EAAMI,EAAI,IAACC,EAAQ,CACrB,KAAM,GACN,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAuCP,CAAA,EAAG;AAAA,EAAMD,MAAKJ,EAAY,EAAG,CAC5B,SAAU,eAChB,CAAK,EAAG;AAAA,EAAMI,EAAI,IAACC,EAAQ,CACrB,KAAM,GACN,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAsCZ,CAAK,CAAC,CACN,CAAG,CACH,CACA,SAASC,EAAWP,EAAQ,GAAI,CAC9B,KAAM,CAAC,QAASQ,CAAS,EAAI,OAAO,OAAO,CAAE,EAAEN,EAAoB,EAAEF,EAAM,UAAU,EACrF,OAAOQ,EAAYH,EAAAA,IAAKG,EAAW,OAAO,OAAO,CAAE,EAAER,EAAO,CAC1D,SAAUK,EAAAA,IAAKN,EAAmBC,CAAK,CAC3C,CAAG,CAAC,EAAID,EAAkBC,CAAK,CAC/B"}