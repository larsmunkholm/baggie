{"version":3,"file":"substringHtmlEntitySafe-c4135e4d.js","sources":["../../packages/core/src/string/manipulation/substringHtmlEntitySafe/substringHtmlEntitySafe.ts","../../packages/core/src/string/manipulation/substringHtmlEntitySafe/Example.tsx","../../packages/core/src/string/manipulation/substringHtmlEntitySafe/substringHtmlEntitySafe.mdx"],"sourcesContent":["type VerboseOutput = {\n    output: string;\n    realIndexStart: number;\n    realIndexEnd: number;\n};\n\n/**\n * Get part of a string between the start and end indexes, or to the end of the\n * string. HTML entities are each counted as one character.\n */\nexport const substringHtmlEntitySafe = <Verbose extends boolean = false>(\n    string: string,\n    indexStart: number,\n    indexEnd?: number,\n    options?: {\n        verbose?: Verbose;\n    },\n): Verbose extends true ? VerboseOutput : string => {\n    const end =\n        typeof indexEnd === \"undefined\"\n            ? undefined\n            : indexEnd < 1\n            ? indexEnd - 1\n            : indexEnd;\n\n    const splitString = string.match(/&#?[a-z0-9]+;|.?/gi) as string[];\n    const output = splitString.slice(indexStart, end).join(\"\");\n    const realIndexStart = options?.verbose\n        ? splitString.slice(0, indexStart).join(\"\").length\n        : 0;\n\n    return (\n        options?.verbose\n            ? {\n                  output,\n                  realIndexStart,\n                  realIndexEnd: realIndexStart + output.length,\n              }\n            : output\n    ) as Verbose extends true ? VerboseOutput : string;\n};\n","import React, { useMemo, useState } from \"react\";\nimport { Source } from \"@storybook/blocks\";\nimport { InputWrapper, TextareaWithHighlights } from \"@baggie/react\";\nimport { substringHtmlEntitySafe } from \"./substringHtmlEntitySafe\";\n\ninterface Props {\n    defaultInput: string;\n    start: number;\n    end?: number;\n}\n\nexport const Example = (props: Props) => {\n    const [input, setInput] = useState(props.defaultInput);\n    const [start, setStart] = useState(props.start);\n    const [end, setEnd] = useState(props.end);\n    const [verbose, setVerbose] = useState(false);\n\n    const { output, realIndexStart, realIndexEnd } = useMemo(\n        () => substringHtmlEntitySafe(input, start, end, { verbose: true }),\n        [input, start, end],\n    );\n\n    return (\n        <>\n            <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"10px\" }}>\n                <InputWrapper label=\"Input\" labelForId=\"input-input\">\n                    <TextareaWithHighlights\n                        id=\"input-input\"\n                        value={input}\n                        onChange={({ target }) => setInput(target.value)}\n                        style={{ width: \"100%\", maxWidth: \"360px\" }}\n                        highlights={[realIndexStart, realIndexEnd]}\n                        spellCheck={false}\n                        rows={3}\n                    />\n                </InputWrapper>\n\n                <div style={{ display: \"flex\", gap: \"10px\" }}>\n                    <InputWrapper label=\"Index start\" labelForId=\"start-input\">\n                        <input\n                            id=\"start-input\"\n                            type=\"number\"\n                            value={start}\n                            onChange={({ target }) => setStart(target.valueAsNumber)}\n                        />\n                    </InputWrapper>\n\n                    <InputWrapper label=\"Index end\" labelForId=\"end-input\">\n                        <input\n                            id=\"end-input\"\n                            type=\"number\"\n                            value={end}\n                            onChange={({ target }) => setEnd(target.valueAsNumber)}\n                        />\n                    </InputWrapper>\n                </div>\n\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={verbose}\n                        onChange={() => setVerbose((current) => !current)}\n                    />\n                    Verbose\n                </label>\n            </div>\n\n            <Source\n                dark\n                code={`\nimport { substringHtmlEntitySafe } from \"@baggie/core\";\n\nconst input = \\`${input.replace(/`/g, \"\\\\`\")}\\`;\n\nconst indexStart = ${start || 0};\nconst indexEnd = ${isNaN(end as number) ? \"undefined\" : (end as number)};\n\nconst output = substringHtmlEntitySafe(input, indexStart, indexEnd${\n                    verbose ? \", { verbose: true }\" : \"\"\n                });\n/*\n${\n    verbose\n        ? `output = ${JSON.stringify({ output, realIndexStart, realIndexEnd }, null, 4)}`\n        : `output = \\`${output}\\``\n}\n*/\n`}\n            />\n        </>\n    );\n};\n","import { Example } from \"./Example\";\n\n# substringHtmlEntitySafe\n\nGet part of a string between the start and end indexes, or to the end of the\nstring. **HTML entities are each counted as one character.**\n\n> HTML entities begin with an ampersand (&) and ends with a semicolon (;).\n>\n> They are frequently used to display characters that reserved by HTML,\n> invisible or difficult to type.\n\n## Parameters\n\n| Parameter      | Type                | Required | Description                              |\n| :------------- | :------------------ | :------: | :--------------------------------------- |\n| **string**     | `string`            |    ✔     | The string to shorten.                   |\n| **indexStart** | `number`            |    ✔     | Where the substring starts.              |\n| **indexEnd**   | `number \\| undefined` |          | Where the substring ends (not included). |\n| **options**    | `object`            |          |                                          |\n\n| Option      | Type      | Default value | Description                  |\n| :---------- | :-------- | :------------ | :--------------------------- |\n| **verbose** | `boolean` | `false`       | Enable verbose return value. |\n\n## Examples\n\n<Example\n    defaultInput=\"lorem &amp;aelig;&amp;oslash;&amp;aring; ipsum\"\n    start={0}\n    end={12}\n/>\n\n<Example defaultInput=\"&amp;aelig;&amp;oslash;&amp;aring;\" start={1} end={2} />\n\n<Example defaultInput=\"sit &amp;amp; amet\" start={4} end={5} />\n"],"names":["substringHtmlEntitySafe","string","indexStart","indexEnd","options","end","splitString","output","realIndexStart","Example","props","input","setInput","useState","start","setStart","setEnd","verbose","setVerbose","realIndexEnd","useMemo","jsxs","Fragment","jsx","InputWrapper","TextareaWithHighlights","target","current","Source","MDXContent","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment"],"mappings":"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"}